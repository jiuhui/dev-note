# 架构基础知识

## 架构分类

目前软件架构有三种架构类型，分别是业务架构、应用架构、技术架构。它们之间的关系是业务架构决定应用架构，技术架构支撑应用架构，
架构的发展是从单体架构、分布式架构、SOA架构再到微服务架构。

- 单体架构

  单体架构再java领域可以理解为一个java web应用程序。

- 分布式架构

  什么是传统的分布式架构？简单来说就是按照业务垂直划分，每个应用都是个单体架构，应用之间通过API相互调用。

- 面向服务的SOA架构

  面向服务架构，它可以根据需求通过网络对松散耦合的粗粒度应用组件进行分布式部署、组合和使用。服务层是SOA的基础，可以直接被应用调用，从而有效控制系统中与软件代理交互的人为依赖性。阿里开元的Dubbo是SOA的经典实现。

- 微服务架构

  微服务架构是SOA架构的进一步发展

## 什么是Spring Cloud

中间件向下屏蔽异构的硬件、软件、网络等计算资源，向上提供应用开发、运行、维护等全生命周期的统一计算环境与管理，属于承上启下的中间连接层。 中间件本质上可以归属为技术架构，常见的中间件分别是服务治理中间件（例如：Dubbo等RPC框架）、配置中心、全链路监控、分布式事务、分布式定时任务、消息中间件、API网关、分布式缓存、数据库中间件等。

Spring Cloud是一个开源的项目集合，包含很多的子项目，提供了一套完整的微服务解决方案，基于Spring Boot开发，包含了服务注册与发现、配置中心、全链路监控、API网关、熔断器等选型中立的组件，可以根据需求替换组装和扩展。

Spring Cloud 组件列表：

| 组件名称 | 所属项目               | 组件分类         |
| -------- | ---------------------- | ---------------- |
| Eureka   | spring-cloud-netflix   | 注册中心         |
| Zuul     | spring-cloud-netflix   | 第一代网关       |
| Sidecar  | spring-cloud-netflix   | 多语言           |
| Ribbon   | spring-cloud-netflix   | 负载均衡         |
| Hystrix  | spring-cloud-netflix   | 熔断器           |
| Turbine  | spring-cloud-netflix   | 集群监控         |
| Feign    | spring-cloud-openfeign | 声明式HTTP客户端 |
| Consul   | spring-cloud-consul    | 注册中心         |
| Gateway  | spring-cloud-gateway   | 第二代网关       |
| Sleuth   | spring-cloud-sleuth    | 链路追踪         |
| Config   | spring-cloud-config    | 配置中心         |
| Bus      | spring-cloud-bus       | 总线             |
| Pipeline | spring-cloud-pipelines | 部署管道         |
| dataflow | spring-cloud-dataflow  | 数据处理         |

- ### 注册中心

  注册中心可以说是微服务架构中的”通讯录“，它记录了服务和服务地址的映射关系。在分布式架构中，服务会注册到这里，当服务需要调用其它服务时，就到这里找到服务的地址，进行调用。

- ### 配置中心

  集中式配置是将应用系统中对配置信息的管理作为一个新的应用功能模块，区别与传统的配置信息分散到系统各个角落方式，进行集中统一管理，并且提供额外功能。尤其是在微服务架构中，是不可或缺组件，甚至是必要组件之一。

  在微服务体系中，服务的数量以及配置信息的日益增多，比如各种服务器参数配置、各种数据库访问参数配置、各种环境下配置信息的不同、配置信息修改之后实时生效等等，传统的配置文件方式或者将配置信息存放于数据库中的方式已无法满足开发人员对配置管理的要求，如：

  安全性：配置跟随源代码保存在代码库中，容易造成配置泄漏
  时效性：修改配置，需要重启服务才能生效
  局限性：无法支持动态调整：例如日志开关、功能开关

