# 经验积累

<!--记录一些平时开发中需要注意的点-->

- 如果某个接口有用到缓存，最好在接口请求的时候加一个是否走缓存的字段，这个字段可以不用对外暴露，它的作用是如果线上改了数据库等需要更新缓存，或者改了逻辑需要验证的时候就可以加上这个字段请求一下。不用等到缓存到期，有些缓存的时间比较长非常不好验证。
- 后端开发一个对外提供的http接口的时候，我们应该站在一个调用者的角度去思考接口的返回是否方便调用者调用，举个例子，查询user 的列表数据，返回的字段有id和userId这两个字段，查询user详情的接口的入参到底用这两个id哪个id呢？如果是用id来区分唯一的一条记录的，那么这个userid这个字段时候还需要是不是名字有问题，或者改为userCode.如果不用数据库唯一主键id来做区分，用自己的userId,那么数据库唯一主键id在接口中就不要返回，以免引起调用者的误解。tip 虽然是个小小的问题，但是如果设计好了（最好是用数据库唯一id来区分）无论从接口的开发，文档的定义，数据库的设计，多开发人员协作开发上都有很大的好处。
- 关于微服务拆分之后的为满足需求的各种查询的思考，举个例子：有一个用户服务 user-service,有一个技能服务 skill-service。需求：查询某个用户下的技能（通过技能的一些属性进行过滤）。skill-service对应的数据库里面有 skill（技能表） user_skill（用户技能关系表），那么查询的时候没什么问题直接连接查询就可以了。但是也有这种情况，skill表和user_skill不在一个表里面，比如skill存在mongodb user_skill却存在mysql里，那这种情况的查询在设计的时候就应该考虑把skill条件查询的字段通过接口调用 mq等方式冗余到user_skill这个库里面。

